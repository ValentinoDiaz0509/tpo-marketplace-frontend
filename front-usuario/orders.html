<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mis pedidos</title>
  <script>
    const API_URL = "http://localhost:4002/api/v1";
    document.addEventListener("DOMContentLoaded", async () => {
      const token = localStorage.getItem("token");
      if (!token) return (window.location.href = "login.html");

      const res = await fetch(`${API_URL}/order`, {
        headers: { Authorization: `Bearer ${token}` },
      });
      const orders = await res.json();
      const container = document.getElementById("orders");
      if (orders.length === 0) return (container.textContent = "No tenés pedidos todavía.");
      orders.forEach(o => {
        const div = document.createElement("div");
        div.innerHTML = `<b>Pedido #${o.id}</b> — ${o.date} — Total: $${o.totalPrice.toFixed(2)}<br>`;
        container.appendChild(div);
      });
    });
  </script>
</head>
<body>
  <h2>Mis pedidos</h2>
  <div id="orders">Cargando...</div>
  <p><a href="profile.html">Volver a mi perfil</a></p>
</body>
</html>
